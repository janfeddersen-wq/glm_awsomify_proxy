version: '3.8'

services:
  cerebras-proxy:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "18080:8080"
    environment:
      - CEREBRAS_API_KEYS
      - CEREBRAS_COOLDOWN=${CEREBRAS_COOLDOWN:-60}
      - LOG_REQUESTS=${LOG_REQUESTS:-true}
      - LOG_DIR=${LOG_DIR:-/app/logs}
      - ENABLE_INCOMING_AUTH=${ENABLE_INCOMING_AUTH:-false}
      - INCOMING_KEY_DB=${INCOMING_KEY_DB:-/app/data/incoming_keys.db}
      - SYNTHETIC_API_KEY=${SYNTHETIC_API_KEY}
      - ZAI_API_KEY=${ZAI_API_KEY}
      - FALLBACK_ON_COOLDOWN=${FALLBACK_ON_COOLDOWN:-false}
    volumes:
      - ./logs:/app/logs
      - ./data:/app/data